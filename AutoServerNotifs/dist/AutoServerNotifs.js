var g="Auto Server Notifs",y="Auto apply settings when joining a server",v="0.0.4",p="#ffc74d",h=[{name:"Animal",id:"118437263754395652"}],S={name:g,description:y,version:v,color:p,authors:h};const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl,o.ScrollView,o.SectionList,o.StatusBar,o.StyleSheet,o.Switch,o.Text,o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable;const b=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon;const f=o.FormInput;o.FormLabel,o.FormRadio;const i=o.FormRow,a=o.FormSection;o.FormSelect,o.FormSubLabel;const m=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes,window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const N=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;function E({settings:e}){return n.createElement(b,null,n.createElement(a,null,n.createElement(i,{label:"Mute Server",trailing:n.createElement(m,{value:e.getBoolean("muted",!1),onValueChange:()=>{e.toggle("muted",!1)}})}),n.createElement(i,{label:"Change Nickname",trailing:n.createElement(m,{value:e.getBoolean("changeNick",!1),onValueChange:()=>{e.toggle("changeNick",!1)}})}),e.getBoolean("changeNick",!1)&&n.createElement(f,{value:e.get("nickname"," "),onChange:t=>e.set("nickname",t),title:"Nickname to set"})),n.createElement(a,{title:"Server Notification Settings"},n.createElement(i,{label:"All Messages",trailing:n.createElement(m,{value:e.get("notifLevel",1)===0,onValueChange:()=>{e.set("notifLevel",0)}})}),n.createElement(i,{label:"Only @mentions",trailing:n.createElement(m,{value:e.get("notifLevel",1)===1,onValueChange:()=>{e.set("notifLevel",1)}})}),n.createElement(i,{label:"Nothing",trailing:n.createElement(m,{value:e.get("notifLevel",1)===2,onValueChange:()=>{e.set("notifLevel",2)}})})),n.createElement(a,null,n.createElement(i,{label:"Suppress @everyone and @here",trailing:n.createElement(m,{value:e.getBoolean("suppressEveryone",!1),onValueChange:()=>{e.toggle("suppressEveryone",!1)}})}),n.createElement(i,{label:"Suppress All Role @mentions",trailing:n.createElement(m,{value:e.getBoolean("suppressRoles",!1),onValueChange:()=>{e.toggle("suppressRoles",!1)}})}),n.createElement(i,{label:"Mute New Events",trailing:n.createElement(m,{value:e.getBoolean("muteEvents",!0),onValueChange:()=>{e.toggle("muteEvents",!0)}})}),n.createElement(i,{label:"Mobile Push Notifications",trailing:n.createElement(m,{value:e.getBoolean("mobilePush",!1),onValueChange:()=>{e.toggle("mobilePush",!1)}})})))}function F(e){window.enmity.plugins.registerPlugin(e)}function C(e){return window.enmity.assets.getIDByName(e)}const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,t)=>window.enmity.modules.filters.byName(e,t),byTypeName:(e,t)=>window.enmity.modules.filters.byTypeName(e,t),byDisplayName:(e,t)=>window.enmity.modules.filters.byDisplayName(e,t)};function A(...e){return window.enmity.modules.bulk(...e)}window.enmity.modules.common;function u(e,t,l){return window.enmity.settings.get(e,t,l)}function s(e,t,l){return window.enmity.settings.getBoolean(e,t,l)}const[T,k,c]=A(r.byProps("updateGuildNotificationSettings"),r.byProps("changeNickname"),r.byProps("dirtyDispatch")),L={onStart(){c.subscribe("GUILD_CREATE",d)},onStop(){c.unsubscribe("GUILD_CREATE",d)},getSettingsPanel:E,...S};function d(e){const t={muted:s("AutoServerNotifs","muted",!1),message_notifications:u("AutoServerNotifs","notifLevel",1),suppress_everyone:s("AutoServerNotifs","suppressEveryone",!1),suppress_roles:s("AutoServerNotifs","suppressRoles",!1),mute_scheduled_events:s("AutoServerNotifs","muteEvents",!0),mobile_push:s("AutoServerNotifs","mobilePush",!1)};N.open({content:`Setting notifications for ${e.guild.name}`,source:C("ic_channel_arrow")}),T.updateGuildNotificationSettings(e.guild.id,t);let l=s("AutoServerNotifs","changeNick",!1),w=u("AutoServerNotifs","nickname");l&&k.changeNickname(e.guild.id,null,"@me",w)}F(L);
